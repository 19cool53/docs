<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=../_media/favicon.ico><meta name=generator content="mkdocs-1.1, mkdocs-material-5.0.0rc4"><title>Blinds and Shutters - Tasmota</title><link rel=stylesheet href=../assets/stylesheets/main.c1451e9e.min.css><link rel=stylesheet href=../assets/stylesheets/palette.4444686e.min.css><meta name=theme-color content=#2196f3><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Barlow",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel="preconnect dns-prefetch" href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-140681905-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#commands class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=.. title=Tasmota class="md-header-nav__button md-logo" aria-label=Tasmota> <img src=../_media/logo.svg alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z /></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Tasmota </span> <span class="md-header-nav__topic md-ellipsis"> Blinds and Shutters </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z /></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/arendst/tasmota/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class="md-tabs__link md-tabs__link--active"> Home </a> </li> <li class=md-tabs__item> <a href=../Scripting-Language/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=../Alexa/ class=md-tabs__link> Smart Home Integrations </a> </li> <li class=md-tabs__item> <a href=../Displays/ class=md-tabs__link> Peripherals </a> </li> <li class=md-tabs__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../FAQ/ class=md-tabs__link> Help </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Tasmota class="md-nav__button md-logo" aria-label=Tasmota> <img src=../_media/logo.svg alt=logo> </a> Tasmota </label> <div class=md-nav__source> <a href=https://github.com/arendst/tasmota/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Home class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../About/ title=About class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../Getting-Started/ title="Getting Started" class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../Upgrading/ title=Upgrading class=md-nav__link> Upgrading </a> </li> <li class=md-nav__item> <a href=../MQTT/ title=MQTT class=md-nav__link> MQTT </a> </li> <li class=md-nav__item> <a href=../Commands/ title=Commands class=md-nav__link> Commands </a> </li> <li class=md-nav__item> <a href=../Templates/ title=Templates class=md-nav__link> Templates </a> </li> <li class=md-nav__item> <a href=../Components/ title=Components class=md-nav__link> Components </a> </li> <li class=md-nav__item> <a href=../Modules/ title=Modules class=md-nav__link> Modules </a> </li> <li class=md-nav__item> <a href=../Rules/ title=Rules class=md-nav__link> Rules </a> </li> <li class=md-nav__item> <a href=../Timers/ title=Timers class=md-nav__link> Timers </a> </li> <li class=md-nav__item> <a href=../Lights/ title=Lights class=md-nav__link> Lights </a> </li> <li class=md-nav__item> <a href=../Buttons-and-Switches/ title="Buttons and Switches" class=md-nav__link> Buttons and Switches </a> </li> <li class=md-nav__item> <a href=../Supported-Peripherals/ title=Peripherals class=md-nav__link> Peripherals </a> </li> <li class=md-nav__item> <a href=../TuyaMCU/ title=TuyaMCU class=md-nav__link> TuyaMCU </a> </li> <li class=md-nav__item> <a href=../Device-Groups/ title="Device Groups" class=md-nav__link> Device Groups </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Blinds and Shutters <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z /></svg> </span> </label> <a href=./ title="Blinds and Shutters" class="md-nav__link md-nav__link--active"> Blinds and Shutters </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#commands class=md-nav__link> Commands </a> </li> <li class=md-nav__item> <a href=#shutter-modes class=md-nav__link> Shutter Modes </a> </li> <li class=md-nav__item> <a href=#operation class=md-nav__link> Operation </a> </li> <li class=md-nav__item> <a href=#pulse-motor-support class=md-nav__link> Pulse Motor Support </a> </li> <li class=md-nav__item> <a href=#stepper-motor-support class=md-nav__link> Stepper Motor Support </a> </li> <li class=md-nav__item> <a href=#calibration class=md-nav__link> Calibration </a> <nav class=md-nav aria-label=Calibration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#increasing-calibration-granularity class=md-nav__link> Increasing Calibration Granularity </a> </li> <li class=md-nav__item> <a href=#motor-movement-delays class=md-nav__link> Motor Movement Delays </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#button-control class=md-nav__link> Button control </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#checklist class=md-nav__link> Checklist </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> Rules </a> </li> <li class=md-nav__item> <a href=#jarolift-shutter-support class=md-nav__link> Jarolift Shutter Support </a> </li> <li class=md-nav__item> <a href=#home-assistant-support class=md-nav__link> Home Assistant Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wiring-diagrams class=md-nav__link> Wiring Diagrams </a> <nav class=md-nav aria-label="Wiring Diagrams"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#normal-wire-configuration-with-a-pcf-as-digital-io class=md-nav__link> Normal wire configuration with a PCF as digital I/O </a> </li> <li class=md-nav__item> <a href=#short-circuit-safe-wire-configuration-with-a-pcf-as-digital-io class=md-nav__link> Short Circuit safe wire configuration with a PCF as digital I/O </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sample-log-output class=md-nav__link> Sample Log Output </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Shutter-and-Steppers/ title="Shutter and Steppers" class=md-nav__link> Shutter and Steppers </a> </li> <li class=md-nav__item> <a href=../Tasmota-IR/ title="IR Communication" class=md-nav__link> IR Communication </a> </li> <li class=md-nav__item> <a href=../WebUI/ title=WebUI class=md-nav__link> WebUI </a> </li> <li class=md-nav__item> <a href=../Compile-your-build/ title=Compiling class=md-nav__link> Compiling </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-22 type=checkbox id=nav-22> <label class=md-nav__link for=nav-22> Features <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Features data-md-level=1> <label class=md-nav__title for=nav-22> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Scripting-Language/ title=Scripting class=md-nav__link> Scripting </a> </li> <li class=md-nav__item> <a href=../Bluetooth/ title=Bluetooth class=md-nav__link> Bluetooth </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-22-3 type=checkbox id=nav-22-3> <label class=md-nav__link for=nav-22-3> Zigbee <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Zigbee data-md-level=2> <label class=md-nav__title for=nav-22-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Zigbee </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Zigbee/ title=Zigbee class=md-nav__link> Zigbee </a> </li> <li class=md-nav__item> <a href=../Zigbee-Internals/ title="Zigbee internals" class=md-nav__link> Zigbee internals </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../TasmotaSlave/ title=TasmotaSlave class=md-nav__link> TasmotaSlave </a> </li> <li class=md-nav__item> <a href=../DeepSleep/ title=DeepSleep class=md-nav__link> DeepSleep </a> </li> <li class=md-nav__item> <a href=../PWM-dimmer-switch/ title="PWM Dimmer" class=md-nav__link> PWM Dimmer </a> </li> <li class=md-nav__item> <a href=../Buzzer/ title=Buzzer class=md-nav__link> Buzzer </a> </li> <li class=md-nav__item> <a href=../Dynamic-Sleep/ title="Dynamic Sleep" class=md-nav__link> Dynamic Sleep </a> </li> <li class=md-nav__item> <a href=../GPS-NTP-server/ title="GPS NTP server" class=md-nav__link> GPS NTP server </a> </li> <li class=md-nav__item> <a href=../I2CDevices/ title="I2C Devices" class=md-nav__link> I2C Devices </a> </li> <li class=md-nav__item> <a href=../Smart-Meter-Interface/ title="Smart Meter Interface" class=md-nav__link> Smart Meter Interface </a> </li> <li class=md-nav__item> <a href=../PIR-Motion-Sensors/ title="PIR Motion Sensors" class=md-nav__link> PIR Motion Sensors </a> </li> <li class=md-nav__item> <a href=../Power-Monitoring-Calibration/ title="Power Monitoring Calibration" class=md-nav__link> Power Monitoring Calibration </a> </li> <li class=md-nav__item> <a href=../Subscribe-%26-Unsubscribe/ title="Subscribe & Unsubscribe" class=md-nav__link> Subscribe & Unsubscribe </a> </li> <li class=md-nav__item> <a href=../TLS/ title="SSL/TLS on Tasmota" class=md-nav__link> SSL/TLS on Tasmota </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-23 type=checkbox id=nav-23> <label class=md-nav__link for=nav-23> Smart Home Integrations <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label="Smart Home Integrations" data-md-level=1> <label class=md-nav__title for=nav-23> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Smart Home Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Alexa/ title=Alexa class=md-nav__link> Alexa </a> </li> <li class=md-nav__item> <a href=../AWS-IoT/ title="AWS IoT" class=md-nav__link> AWS IoT </a> </li> <li class=md-nav__item> <a href=../Domoticz/ title=Domoticz class=md-nav__link> Domoticz </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ title="Home Assistant" class=md-nav__link> Home Assistant </a> </li> <li class=md-nav__item> <a href=../Homebridge/ title=Homebridge class=md-nav__link> Homebridge </a> </li> <li class=md-nav__item> <a href=../HomeSeer/ title=HomeSeer class=md-nav__link> HomeSeer </a> </li> <li class=md-nav__item> <a href=../IP-Symcon/ title="IP Symcon" class=md-nav__link> IP Symcon </a> </li> <li class=md-nav__item> <a href=../KNX/ title=KNX class=md-nav__link> KNX </a> </li> <li class=md-nav__item> <a href=../NodeRed/ title=NodeRed class=md-nav__link> NodeRed </a> </li> <li class=md-nav__item> <a href=../nymea/ title=nymea class=md-nav__link> nymea </a> </li> <li class=md-nav__item> <a href=../OctoPrint.md title=None class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../openHAB/ title=openHAB class=md-nav__link> openHAB </a> </li> <li class=md-nav__item> <a href=../otto/ title=Otto class=md-nav__link> Otto </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/issues/3769 title=IOBroker class=md-nav__link> IOBroker </a> </li> <li class=md-nav__item> <a href=https://github.com/tim-hellhake/tasmota-adapter title="Mozilla WebThings Adapter" class=md-nav__link> Mozilla WebThings Adapter </a> </li> <li class=md-nav__item> <a href=https://github.com/BrettSheleski/SmartThingsPublic/blob/master/devicetypes/brettsheleski/sonoff-tasmota.src/readme.md title=SmartThings class=md-nav__link> SmartThings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-24 type=checkbox id=nav-24> <label class=md-nav__link for=nav-24> Peripherals <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Peripherals data-md-level=1> <label class=md-nav__title for=nav-24> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Peripherals </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-24-1 type=checkbox id=nav-24-1> <label class=md-nav__link for=nav-24-1> Displays <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Displays data-md-level=2> <label class=md-nav__title for=nav-24-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Displays </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Displays/ title=Displays class=md-nav__link> Displays </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../A4988-Stepper-Motor-Controller/ title="A4988 stepper motor controller" class=md-nav__link> A4988 stepper motor controller </a> </li> <li class=md-nav__item> <a href=../AM2301/ title="AM2301 temperature and humidity sensor" class=md-nav__link> AM2301 temperature and humidity sensor </a> </li> <li class=md-nav__item> <a href=../APDS-9960/ title="APDS 9960" class=md-nav__link> APDS 9960 </a> </li> <li class=md-nav__item> <a href=../AZ-7798/ title="AZ 7798" class=md-nav__link> AZ 7798 </a> </li> <li class=md-nav__item> <a href=../BH1750/ title=BH1750 class=md-nav__link> BH1750 </a> </li> <li class=md-nav__item> <a href=../BME280/ title=None class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../BME680/ title=BME680 class=md-nav__link> BME680 </a> </li> <li class=md-nav__item> <a href=../BME280/ title="BMP280 pressure sensor" class=md-nav__link> BMP280 pressure sensor </a> </li> <li class=md-nav__item> <a href=../CC2530/ title=CC2530 class=md-nav__link> CC2530 </a> </li> <li class=md-nav__item> <a href=../Moisture-Sensor-and-Chirp%21-Sensor/ title="Chirp! moisture sensor" class=md-nav__link> Chirp! moisture sensor </a> </li> <li class=md-nav__item> <a href=../DHT11/ title=DHT11 class=md-nav__link> DHT11 </a> </li> <li class=md-nav__item> <a href=../DS18x20/ title=DS18x20 class=md-nav__link> DS18x20 </a> </li> <li class=md-nav__item> <a href=../DS3231/ title=DS3231 class=md-nav__link> DS3231 </a> </li> <li class=md-nav__item> <a href=../HM-10/ title="HM 10" class=md-nav__link> HM 10 </a> </li> <li class=md-nav__item> <a href=../HM-17/ title="HM 17" class=md-nav__link> HM 17 </a> </li> <li class=md-nav__item> <a href=../HC-SR04/ title="HC SR04" class=md-nav__link> HC SR04 </a> </li> <li class=md-nav__item> <a href=../Honeywell-HIH/ title="Honeywell HIH" class=md-nav__link> Honeywell HIH </a> </li> <li class=md-nav__item> <a href=../IR-Remote/ title="IR Remote" class=md-nav__link> IR Remote </a> </li> <li class=md-nav__item> <a href=../LM75AD/ title=LM75AD class=md-nav__link> LM75AD </a> </li> <li class=md-nav__item> <a href=../MCP230xx/ title=MCP230xx class=md-nav__link> MCP230xx </a> </li> <li class=md-nav__item> <a href=../MGC3130/ title=MGC3130 class=md-nav__link> MGC3130 </a> </li> <li class=md-nav__item> <a href=../MH-Z19B/ title="MH Z19B" class=md-nav__link> MH Z19B </a> </li> <li class=md-nav__item> <a href=../MLX90614/ title=MLX90614 class=md-nav__link> MLX90614 </a> </li> <li class=md-nav__item> <a href=../MPR121/ title="MPR121 I2C Proximity Capacitive Touch Sensor Controller" class=md-nav__link> MPR121 I<sup>2</sup>C Proximity Capacitive Touch Sensor Controller </a> </li> <li class=md-nav__item> <a href=../MPU-6050/ title="MPU 6050" class=md-nav__link> MPU 6050 </a> </li> <li class=md-nav__item> <a href=../NRF24L01/ title=NRF24L01 class=md-nav__link> NRF24L01 </a> </li> <li class=md-nav__item> <a href=../P1-Smart-Meter/ title="Kaifa MA105C Energy Meter" class=md-nav__link> Kaifa MA105C Energy Meter </a> </li> <li class=md-nav__item> <a href=../PAJ7620/ title=PAJ7620 class=md-nav__link> PAJ7620 </a> </li> <li class=md-nav__item> <a href=../PCA9685/ title=PCA9685 class=md-nav__link> PCA9685 </a> </li> <li class=md-nav__item> <a href=../PN532/ title=PN532 class=md-nav__link> PN532 </a> </li> <li class=md-nav__item> <a href=../PZEM-0XX/ title="PZEM 0XX" class=md-nav__link> PZEM 0XX </a> </li> <li class=md-nav__item> <a href=../RCWL-0516/ title="RCWL 0516" class=md-nav__link> RCWL 0516 </a> </li> <li class=md-nav__item> <a href=../RDM6300/ title=RDM6300 class=md-nav__link> RDM6300 </a> </li> <li class=md-nav__item> <a href=../SDS011/ title=SDS011 class=md-nav__link> SDS011 </a> </li> <li class=md-nav__item> <a href=../SHT30/ title=SHT30 class=md-nav__link> SHT30 </a> </li> <li class=md-nav__item> <a href=../TX2x/ title=TX2x class=md-nav__link> TX2x </a> </li> <li class=md-nav__item> <a href=../TSL2561/ title=TSL2561 class=md-nav__link> TSL2561 </a> </li> <li class=md-nav__item> <a href=../VEML6070/ title=VEML6070 class=md-nav__link> VEML6070 </a> </li> <li class=md-nav__item> <a href=../VL53L0x/ title=VL53L0x class=md-nav__link> VL53L0x </a> </li> <li class=md-nav__item> <a href=../WS2812B-RGB-Shield/ title="WS2812B RGB Shield" class=md-nav__link> WS2812B RGB Shield </a> </li> <li class=md-nav__item> <a href=../WS2812B-and-WS2813/ title="WS2812B and WS2813" class=md-nav__link> WS2812B and WS2813 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-25 type=checkbox id=nav-25> <label class=md-nav__link for=nav-25> Supported Devices <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label="Supported Devices" data-md-level=1> <label class=md-nav__title for=nav-25> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Configuration-Procedure-for-New-Devices/ title="Configuring unknown devices" class=md-nav__link> Configuring unknown devices </a> </li> <li class=md-nav__item> <a href="https://templates.blakadder.com/ " target='_blank""' title="All Supported Devices" class=md-nav__link> All Supported Devices </a> </li> <li class=md-nav__item> <a href=../Supported-Modules/ title="Supported Modules" class=md-nav__link> Supported Modules </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-26 type=checkbox id=nav-26> <label class=md-nav__link for=nav-26> Help <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Help data-md-level=1> <label class=md-nav__title for=nav-26> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../FAQ/ title=FAQ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../Device-Recovery/ title="Device Recovery" class=md-nav__link> Device Recovery </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Contributing/ title=Contributing class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href="//discord.gg/Ks2Kzd4  " target='_blank""' title="Discord Community" class=md-nav__link> Discord Community </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#commands class=md-nav__link> Commands </a> </li> <li class=md-nav__item> <a href=#shutter-modes class=md-nav__link> Shutter Modes </a> </li> <li class=md-nav__item> <a href=#operation class=md-nav__link> Operation </a> </li> <li class=md-nav__item> <a href=#pulse-motor-support class=md-nav__link> Pulse Motor Support </a> </li> <li class=md-nav__item> <a href=#stepper-motor-support class=md-nav__link> Stepper Motor Support </a> </li> <li class=md-nav__item> <a href=#calibration class=md-nav__link> Calibration </a> <nav class=md-nav aria-label=Calibration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#increasing-calibration-granularity class=md-nav__link> Increasing Calibration Granularity </a> </li> <li class=md-nav__item> <a href=#motor-movement-delays class=md-nav__link> Motor Movement Delays </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#button-control class=md-nav__link> Button control </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#checklist class=md-nav__link> Checklist </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> Rules </a> </li> <li class=md-nav__item> <a href=#jarolift-shutter-support class=md-nav__link> Jarolift Shutter Support </a> </li> <li class=md-nav__item> <a href=#home-assistant-support class=md-nav__link> Home Assistant Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wiring-diagrams class=md-nav__link> Wiring Diagrams </a> <nav class=md-nav aria-label="Wiring Diagrams"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#normal-wire-configuration-with-a-pcf-as-digital-io class=md-nav__link> Normal wire configuration with a PCF as digital I/O </a> </li> <li class=md-nav__item> <a href=#short-circuit-safe-wire-configuration-with-a-pcf-as-digital-io class=md-nav__link> Short Circuit safe wire configuration with a PCF as digital I/O </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sample-log-output class=md-nav__link> Sample Log Output </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/tasmota/docs/blob/master/docs/Blinds-and-Shutters.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg> </a> <h1>Blinds and Shutters</h1> <p>!&gt; <strong>This feature is not included in precompiled binaries.</strong> <br> To use it you must <a href=../Compile-your-build/ >compile your build</a>. Add the following to <code>user_config_override.h</code>:</p> <div class=codehilite><pre><span></span><code><span class=cp>#ifndef USE_SHUTTER</span>
<span class=cp>#define USE_SHUTTER           </span><span class=c1>// Add Shutter support (+6k code)</span>
<span class=cp>#endif</span>
</code></pre></div> <hr> <p>?&gt; Control blinds and roller shades connected to regular ON/OFF motors or stepper motors.</p> <p>The device must have at least two relays (e.g., a <a href=#sonoff-dual-r2-required-configuration>Sonoff Dual R2</a>). Otherwise the shutter feature will not work.</p> <h2 id=commands>Commands<a class=headerlink href=#commands title="Permanent link">~</a></h2> <p>First enable shutter support with <code>SetOption80 1</code></p> <p>Complete list of commands is available at <a href=../Commands/#blinds-shutters-and-roller-shades>Blinds, Shutters and Roller Shades Commands</a>.</p> <h2 id=shutter-modes>Shutter Modes<a class=headerlink href=#shutter-modes title="Permanent link">~</a></h2> <p>There are three shutter modes which are defined according to the <a href=../Commands/#pulsetime>PulseTime</a> and <a href=../Commands/#interlock>Interlock</a> settings. The examples below are for a <code>ShutterRelay1 1</code> configuration (using Relay1 and Relay2). 1. <strong>ShutterMode 0</strong> - Normal Operation <br> First relay: OFF/DOWN, Second relay: OFF/UP<br> - <code>Backlog PulseTime1 0; PulseTime2 0</code> - <code>Backlog Interlock 1,2; Interlock ON</code> (Interlocked relay pair)</p> <ol> <li><strong>ShutterMode 1</strong> - Circuit Safe First relay: ON/OFF, Second relay: UP/DOWN</li> <li><code>Backlog PulseTime1 0; PulseTime2 0</code></li> <li> <p><code>Interlock OFF</code></p> </li> <li> <p><strong>ShutterMode 2</strong> - Pulse Motors <br> First relay: OFF/DOWN PULSE, Second relay: OFF/UP PULSE</p> </li> <li><code>Backlog PulseTime1 2; PulseTime2 2</code></li> <li> <p><code>Backlog Interlock 1,2; Interlock ON</code> (Interlocked relay pair)</p> </li> <li> <p><strong>ShutterMode 3</strong> - Stepper Motors <br> First relay: ON/OFF, Second relay: UP/DOWN PWM: Stepper signal, COUNTER: Stepper position signal</p> </li> <li><code>Backlog PulseTime1 0; PulseTime2 0</code></li> <li><code>Interlock OFF</code></li> <li>PWM and COUNTER defined</li> </ol> <p><a href=#wiring-diagrams>Wiring diagrams</a> for Normal, Stepper motor, and Short Circuit-Safe configurations are available at the end of this page. Even if the shutter does not have two motors, three wires have to be connected.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><strong>After setting the options for shutter mode, the device must be rebooted.</strong> Otherwise, the sliders won't be available in the web UI, and the <code>ShutterOpenDuration&lt;x&gt;</code>and <code>ShutterCloseDuration&lt;x&gt;</code> commands will report "Shutter unknown". </p> </div> <p>Issue <code>ShutterRelay&lt;x&gt; 1</code> command and check in console which <strong>ShutterMode</strong> is displayed:</p> <pre style=white-space:pre-line>
Shutter accuracy digits: 1
Shutter 0 (Relay:1): Init. Pos: 20000 [100 %], Open Vel.: 100 Close Vel.: 100 , Max Way: 20000, Opentime 10.0 [s], Closetime 10.0 [s], CoedffCalc: c0: 0, c1 200, c2: 200, c3: 0, c4: 0, binmask 3, is inverted 1, <span style=font-weight:bold;color:lime>ShutterMode 0</span>, motordelay 0
</pre> <h2 id=operation>Operation<a class=headerlink href=#operation title="Permanent link">~</a></h2> <p>Turning a device relay on or off directly (i.e., using <code>Power</code>) will function to affect a shutter's movement. In momentary mode (i.e., stepper motor), the relays start or stop the motor. The driver takes care of the direction and proper update of the shutter position.</p> <p>The shutter reports its position and can also be sent to a dedicated position. <code>ShutterPosition</code> = <code>0</code> means the shutter is closed and <code>ShutterPosition</code> = <code>100</code> means the shutter is open. If you need the position values reversed (<code>0</code> = open, <code>100</code> = closed), define and <a href=#calibration>calibrate your shutter as documented below</a>. Then tell Tasmota to reverse the shutter position meaning via the <code>ShutterInvert&lt;x&gt; 1</code> command. All internal calculations are the same (the log output is the same). Only the interaction with the user and other systems changes. Now <code>ShutterPosition&lt;x&gt; 0</code> will open the shutter and <code>ShutterPosition&lt;x&gt; 100</code> will close the shutter.</p> <p>By default, only <code>Shutter1</code> is enabled when <code>SetOption80 1</code> is invoked.<br> <img alt src=https://user-images.githubusercontent.com/34340210/65997878-3517e180-e468-11e9-950e-bfe299771233.png></p> <p>A maximum of four shutters per device are supported.<br> <img alt src=https://user-images.githubusercontent.com/34340210/65997879-3517e180-e468-11e9-9c44-9ad4a4a970cc.png> </p> <p>To enable additional shutters, <code>ShutterRelay&lt;x&gt; &lt;value&gt;</code> must be executed for each additional shutter. Additional shutter declarations must be sequentially numbered, and without gaps (i.e., second shutter is 2, then shutter 3, and finally shutter 4).</p> <p>Disabling a shutter in the middle of the defined set of shutters will disable all other higher numbered shutters. If the disabled shutter is restored, the higher numbered shutters previously declared will also be restored. When a shutter is added or removed, a list of the active shutters, with their parameters, is output to the log. If you intend to remove shutters, explicitly remove each one beginning with the highest numbered shutter.</p> <p>With four shutters, eight <code>Relay&lt;x&gt;</code> components are needed. If manual operation switches (<code>Switch&lt;x&gt;</code> or <code>Button&lt;x&gt;</code> pairs) are also used, additional input GPIO are required. The ESP82xx device may not have enough free GPIO to support all the shutter connections required. A GPIO expander such as a PCF8574 or <a href=../MCP230xx/ >MCP230xx</a> can be used.</p> <p>Using manual operation <code>Switch&lt;x&gt;</code> pairs may require setting <code>SwitchMode&lt;x&gt; 4</code> (inverse follow) for proper switch behavior.</p> <p>Any shutter positioning can be locked <code>ShutterLock&lt;x&gt; 1</code>. Once executed an ongoing movement is finished while further positioning commands like <code>ShutterOpen&lt;x&gt;</code>, <code>ShutterClose&lt;x&gt;</code>, <code>ShutterStop&lt;x&gt;</code>, and <code>ShutterPosition&lt;x&gt;</code>, as well as web UI buttons, web UI sliders, and shutter buttons are disabled. This can be used to lock an outdoor blind in case of high wind or rain. You may also disable shutter positioning games by your children. Shutter positioning can be unlocked using <code>ShutterLock&lt;x&gt; 0</code>. Please be aware that the shutter can still be moved by direct relay control (i.e., <code>power&lt;x&gt;</code>), or physical switches and buttons. Use hte <code>ShutterButton&lt;x&gt;</code> command prior to <code>ShutterLock</code> to be able to lock buttons.</p> <h2 id=pulse-motor-support>Pulse Motor Support<a class=headerlink href=#pulse-motor-support title="Permanent link">~</a></h2> <p>There are shutters that have two relays but only need a pulse to start or stop. Depending on the current situation a pulse will stop the shutter or send it into a specific direction. To use these kinds of shutters a <a href=../Commands/#pulsetime><code>PulseTime</code></a> must be defined on each relay. The minimum setting that seems to make it work consistently is <code>2</code>. A setting of <code>1</code> does not work. If the shutter moves too fast and does not react to a stop command, increase the setting to <code>3</code> or <code>4</code>. </p> <h2 id=stepper-motor-support>Stepper Motor Support<a class=headerlink href=#stepper-motor-support title="Permanent link">~</a></h2> <p>Stepper motors can also be used to operate shutters and blinds. Additionally you can operate sliding doors with this configuration.</p> <p>Please refer to <a href=../Shutter-and-Steppers/ >Shutters and Steppers</a> for details. </p> <h2 id=calibration>Calibration<a class=headerlink href=#calibration title="Permanent link">~</a></h2> <p><a href="https://www.youtube.com/watch?v=Z-grrvnu2bU">Shutter calibration video tutorial</a> </p> <ul> <li>Set the <code>ShutterOpenDuration&lt;x&gt;</code> to the time the shutter needs to open completely.</li> <li>Set the <code>ShutterCloseDuration&lt;x&gt;</code> at least to the time the shutter needs to close completely. If the shutter does not close completely or runs too long, the calibration point of a closed shutter can be defined with <code>ShutterSetClose&lt;x&gt;</code>. Move the shutter to the close position and execute <code>ShutterSetClose&lt;x&gt;</code> command. <code>ShutterPosition&lt;x&gt;</code> will be reset to 0 (<code>ShutterClose&lt;x&gt;</code>).</li> <li>Set the 50% open position of the shutter. Some shutters need some time from totally closed until they begin moving the bottom-most part and opening. This often results a shutter that is less than 50% open when the shutter has been operating for 50% of the set duration. This can be corrected by using <code>ShutterSetHalfway&lt;x&gt;</code>. Use this procedure to calibrate the half-open position:</li> <li><code>ShutterClose&lt;x&gt;</code> (confirm that the shutter is completely closed)</li> <li><code>ShutterSetHalfway&lt;x&gt; 50</code> (reset to default)</li> <li>Move the shutter to actual 50% open position.</li> <li>Use <code>ShutterPosition&lt;x&gt;</code> to inquire the shutter's current position and record the value. This value is a <strong>percentage of the total opening</strong> (e.g., <code>63</code> = 63% of opening).</li> <li><code>ShutterClose&lt;x&gt;</code></li> <li><code>ShutterSetHalfway&lt;x&gt; 63</code> (using the value from step #4 above)</li> <li><code>Restart 1</code></li> <li>After calibration you might want to enable an additional 1s motor movement by <code>ShutterEnableEndStopTime&lt;x&gt; 1</code> when the shutter is asked to move to its end positions (0% and 100%). By this you can guarantee that end positions are still reached in case of inaccuracies. Take care to disable this by <code>ShutterEnableEndStopTime&lt;x&gt; 0</code> before further open or close duration measurements.</li> </ul> <h3 id=increasing-calibration-granularity>Increasing Calibration Granularity<a class=headerlink href=#increasing-calibration-granularity title="Permanent link">~</a></h3> <p>If you desire that the %-opening closely match what <code>ShutterPosition&lt;x&gt;</code> and web UI indicate, there is a granular calibration matrix available. Ensure that <code>ShutterClose&lt;x&gt;</code> and <code>ShutterOpen&lt;x&gt;</code> moves the shutter more or less to the limit positions and follow this procedure: - <code>ShutterSetHalfway&lt;x&gt; 50</code> (reset to default) - <code>ShutterCalibration&lt;x&gt; 30 50 70 90 100</code> - <code>Restart 1</code> - <code>ShutterClose&lt;x&gt;</code> - Move the shutter to each of the following opening percentages and measure the shutter's position for each. - <code>ShutterPosition&lt;x&gt; 30</code> (e.g., measurement = <code>15</code>) - <code>ShutterPosition&lt;x&gt; 50</code> (e.g., measurement = <code>50</code>) - <code>ShutterPosition&lt;x&gt; 70</code> (e.g., measurement = <code>100</code>) - <code>ShutterPosition&lt;x&gt; 90</code> (e.g., measurement = <code>150</code>) - <code>ShutterPosition&lt;x&gt; 100</code> (e.g., measurement = <code>180</code>) - Finally, enter the position measurements as the calibration values: <code>ShutterCalibration&lt;x&gt; 15 50 100 150 180</code> </p> <p><code>ShutterCalibration&lt;x&gt;</code> takes position measurements (<strong>not</strong> the time it takes to move). During calibration you position the shutter to an indicated percentage (e.g., <code>30%</code>) of opening and measure the shutter position (e.g., <code>15</code>). Use the same unit of measure for all your measurements (e.g., centimeters, inches, etc.). After calibration <code>ShutterPosition&lt;x&gt; 30</code> will move to <code>30%</code> opening which will correspond to the position you provided (<code>15</code>). </p> <p>Notice that there is no calibration for the 10\% position. On many shutters, there is no movement during the initial phase (i.e., nearly 10% of total time). Therefore the opening could be <code>0</code>. This measurement would cause an execution DIV 0 exception. Therefore the first calibration point is 30%. In most cases this is not a large opening so the calibration will be near enough. Yes, until ~10%, the position will be a bit "off" but not enough for concern. </p> <h3 id=motor-movement-delays>Motor Movement Delays<a class=headerlink href=#motor-movement-delays title="Permanent link">~</a></h3> <p>Some motors need up to one second after power is turned on before they start moving. You can confirm if you are having this issue if opening and closing as a single action works properly but doing this in smaller steps result in a shift of the position.<br> 1. <code>Shutterposition&lt;x&gt; 30</code><br> Measure the shutter position. This is the <code>reference_position</code> 2. <code>Shutterposition&lt;x&gt; 80</code><br> Measure the shutter position. This is the <code>max_position</code> 3. <code>Shutterposition&lt;x&gt; 30</code><br> Return the shutter to starting position. This must be the same position as measured in step #1 (<code>reference_position</code>). If not, <code>ShutterCloseDuration</code> must be adjusted.<br> 4. <code>Shutterposition&lt;x&gt; 50</code><br> 5. <code>Shutterposition&lt;x&gt; 70</code><br> 6. <code>Shutterposition&lt;x&gt; 80</code> <br> If you do not reach <code>max_position</code> you have a motor delay problem. Measure the shutter position. This is the <code>real_max</code>. Use this value in the calculation below.<br> 7. <code>ShutterMotorDelay&lt;x&gt; &lt;delay&gt;</code><br> Motor <code>&lt;delay&gt;</code> calculation - fine tune in 0.05 second increments (e.g. <code>0.65</code>) as required.<br> <code>&lt;delay&gt; = ((max_position-real_max) / 2) / (((100/80) * max_position) / ShutterOpenDuration)</code></p> <p>Close the shutter and repeat this procedure until the motor delay is set properly. </p> <h2 id=button-control>Button control<a class=headerlink href=#button-control title="Permanent link">~</a></h2> <p>When shutter is running in normal <code>ShutterMode: 0</code>, you already have basic control over the shutter movement using tasmota switches or tasmota buttons in the module configuration to directly drive the shutter relays. For short circuit safe operation <code>ShutterMode: 1</code> direct control of the relays will not give you a nice user interface since you have to 1st set the direction with one switch or button and 2nd switch on the power by the other switch or button. </p> <p>To have shutter mode independent button control over the shutter and not over its relays one can use the <code>ShutterButton&lt;x&gt;</code> command. It also introduces some more features, see below:</p> <p><code>ShutterButton&lt;x&gt; &lt;button&gt; &lt;func&gt; &lt;mqtt&gt;</code> </p> <p>This assigns a tasmota button <code>&lt;button&gt;</code> to control your shutter <code>&lt;x&gt;</code> having functionality <code>&lt;func&gt;</code>. The tasmota button <code>&lt;button&gt;</code> must already be configured in the module configuration. You can assign multiple buttons to a single shutter. Any button can only control one shutter (beside the <code>&lt;mqtt&gt;</code> broadcast feature, see description below). Any press of the button while the shutter is moving will immediately stop the shutter.</p> <p>One can remove all button control for shutter <code>&lt;x&gt;</code> by <code>ShutterButton&lt;x&gt; 0</code>. </p> <p>The assigned button can have one of the following functionalities:<br></p> <ul> <li> <p>Setup for an "up" button: <code>ShutterButton&lt;x&gt; &lt;button&gt; up &lt;mqtt&gt;</code> Single press will move shutter to 100%, double press to 50% and tripple press to 74%. Holding the button for more than the hold time (SetOption32) moves all shutters with same <code>&lt;grouptopic&gt;</code> to 100% when <code>&lt;mqtt&gt;</code> is equal to <code>1</code>. When <code>&lt;mqtt&gt;</code> is equal to <code>0</code> hold action of this button is same as single press. </p> </li> <li> <p>Setup for a "down" button: <code>ShutterButton&lt;x&gt; &lt;button&gt; down &lt;mqtt&gt;</code> Single press will move shutter to 0%, double press to 50% and tripple press to 24%. Holding the button for more than the hold time (SetOption32) moves all shutters with same <code>&lt;grouptopic&gt;</code> to 0% when <code>&lt;mqtt&gt;</code> is equal to <code>1</code>. When <code>&lt;mqtt&gt;</code> is equal to <code>0</code> hold action of this button is same as single press. </p> </li> <li> <p>Setup for an "updown" button: <code>ShutterButton&lt;x&gt; &lt;button&gt; updown &lt;mqtt&gt;</code> Single press will move shutter to 100%, double press down to 0% and tripple press to 50%. No hold action and no other shutter control by MQTT, <code>&lt;mqtt&gt;</code> is don't care here.</p> </li> </ul> <p>More advanced control of the button press actions is given by the following <code>ShutterButton&lt;x&gt;</code> command syntax:</p> <p><code>ShutterButton&lt;x&gt; &lt;button&gt; &lt;p1&gt; &lt;p2&gt; &lt;p3&gt; &lt;ph&gt; &lt;m1&gt; &lt;m2&gt; &lt;m3&gt; &lt;mh&gt; &lt;mi&gt;</code> </p> <p><code>&lt;button&gt;</code> <code>1..4</code>: Button number, <code>0/-</code>: disable buttons for this shutter<br><code>&lt;p1&gt;</code> <code>0..100</code>: single press position, <code>-</code>: disable<br><code>&lt;p2&gt;</code> <code>0..100</code>: double press position, <code>-</code>: disable<br><code>&lt;p3&gt;</code> <code>0..100</code>: tripple press position, <code>-</code>: disable<br><code>&lt;ph&gt;</code> <code>0..100</code>: hold press position, <code>-</code>: disable<br><code>&lt;m1&gt;</code> <code>1</code>: enable single press position MQTT broadcast, <code>0/-</code>: disable<br><code>&lt;m2&gt;</code> <code>1</code>: enable double press position MQTT broadcast, <code>0/-</code>: disable<br><code>&lt;m3&gt;</code> <code>1</code>: enable tripple press position MQTT broadcast, <code>0/-</code>: disable<br><code>&lt;mh&gt;</code> <code>1</code>: enable hold press position MQTT broadcast, <code>0/-</code>: disable<br><code>&lt;mi&gt;</code> <code>1</code>: enable MQTT broadcast to all shutter indices, <code>0/-</code>: disable</p> <p>Any parameters are optional: when missing all subsequent parameters are set to <code>disable</code>.</p> <p>By a button single press the shutter is set to position <code>&lt;p1&gt;</code>. Double press will drive the shutter to position <code>&lt;p2&gt;</code> and tripple press to position <code>&lt;p3&gt;</code>. Holding the button for more than the <code>SetOption32</code> time sets the shutter position to <code>&lt;ph&gt;</code>. Any button action <code>&lt;p1&gt;</code> to <code>&lt;ph&gt;</code> can be disabled by setting the parameter to <code>-</code>. Independent from configuration <code>&lt;p1&gt;</code> to <code>&lt;ph&gt;</code> any press of the button while the shutter is moving will immediately stop the shutter.</p> <p>Global steering of all your shutters at home is supported by additional MQTT broadcast. By any button action a corresponding MQTT command can be initiated to the <code>&lt;grouptopic&gt;</code> of the device. For single press this can be enabled by <code>&lt;m1&gt;</code> equal to <code>1</code>, disabling is indicated by <code>-</code>. Double to hold MQTT configurations are given by <code>&lt;m2&gt;</code> to <code>&lt;mh&gt;</code>, correspondingly. When <code>&lt;mi&gt;</code> is equal to <code>-</code> only <code>cmnd/&lt;grouptopic&gt;/Shutterposition&lt;x&gt; &lt;p1..h&gt;</code> is fired. When <code>&lt;mi&gt;</code> is equal to <code>1</code>, <code>&lt;x&gt;</code>=<code>1..4</code> is used to control any shutter number of a tasmota device having same <code>&lt;grouptopic&gt;</code>.</p> <p>Examples: - <code>ShutterButton&lt;x&gt; &lt;button&gt; 100 50 74 100 0 0 0 1 1</code> is same as <code>ShutterButton&lt;x&gt; &lt;button&gt; up 1</code>. - <code>ShutterButton&lt;x&gt; &lt;button&gt; 0 50 24 0 0 0 0 1 1</code> is same as <code>ShutterButton&lt;x&gt; &lt;button&gt; down 1</code>. - <code>ShutterButton&lt;x&gt; &lt;button&gt; 100 0 50 - 0 0 0 0 0</code> is same as <code>ShutterButton&lt;x&gt; &lt;button&gt; updown 0</code>.</p> <p>Module WiFi setup, restart, upgrade and reset according to <a href=../Buttons-and-Switches/ >Buttons and Switches</a> are supported "child and fool save" only when no button restriction (SetOption1) is given and when all configured shutter buttons of that shutter are pressed 5x, 6x, 7x times or hold long simultaneously.</p> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">~</a></h2> <h4>Sonoff Dual R2 Required Configuration</h4> <p>If using a Sonoff Dual R2, use the following Template:<br> <code>{"NAME":"Sonoff Dual R2","GPIO":[17,255,0,255,0,22,18,0,21,56,0,0,0,0],"FLAG":0,"BASE":39}</code></p> <h3 id=checklist>Checklist<a class=headerlink href=#checklist title="Permanent link">~</a></h3> <ul> <li>Ensure that the first relay opens the shutter</li> <li>Ensure that the second relay closes the shutter</li> <li>Set <code>ShutterRelay&lt;x&gt;</code></li> <li>Set <code>ShutterOpenDuration&lt;x&gt;</code></li> <li>Set <code>ShutterCloseDuration&lt;x&gt;</code></li> <li>Set <code>ShutterSetHalfway&lt;x&gt;</code> (optional)</li> <li>Set <code>ShutterInvert&lt;x&gt;</code>(optional)</li> <li>Set <code>ShutterInvertWebButtons&lt;x&gt;</code>(optional) (eg. useful for horizontal awnings)</li> <li>If the shutter uses a pulse motor instead of a motors with one wire for each direction (i.e., duration based), define <code>PulseTime&lt;x&gt; 2</code> on both relays. The driver's behavior will change to a pulse motor that needs pulses to start and stop. </li> </ul> <h3 id=rules>Rules<a class=headerlink href=#rules title="Permanent link">~</a></h3> <p>Tasmota rule triggers:<br> - <code>Shutter&lt;x&gt;#Position</code> is triggered at start and and of movement reporting actual position - <code>Shutter&lt;x&gt;#Direction</code> is triggered at start and and of movement reporting actual direction - <code>Shutter&lt;x&gt;#Target</code> is triggered at start and and of movement reporting current target - <code>Shutter&lt;x&gt;#Open</code> and <code>Shutter&lt;x&gt;#Close</code> - <code>Shutter#Moving</code> is triggered every second if the shutter is moving - <code>Shutter#Moved</code> is triggered ONCE after the shutter stopped - <code>Shutter&lt;x&gt;#Button&lt;button&gt;=0</code> is triggered when <code>button</code> is hold - <code>Shutter&lt;x&gt;#Button&lt;button&gt;=&lt;n&gt;</code> is triggered when <code>button</code> is pressed <code>n</code> times - <code>Shutter&lt;x&gt;#Button0=0</code> is triggered when all buttons of that shutter are hold simultaneously - <code>Shutter&lt;x&gt;#Button0=&lt;n&gt;</code> is triggered when all buttons of that shutter are pressed simultaneously <code>n</code> times</p> <p>With #Direction and var1..var4 you can store the movement ofa shutter and get information which shutter is moving</p> <p>Examples:<br> - Publish a message with the position of the shutter: <code>Rule1 ON Shutter1#Position DO Publish status/%topic%/level {"%value%"} ENDON</code></p> <ul> <li>Open/Close or set a specific position for a shutter. This example drives the second shutter to the same position as the first shutter:<br> <code>Rule1 ON Shutter1#Position DO ShutterPosition2 %value%" ENDON</code></li> </ul> <h3 id=jarolift-shutter-support>Jarolift Shutter Support<a class=headerlink href=#jarolift-shutter-support title="Permanent link">~</a></h3> <p>Jarolift shutters operates by the 3 commands up/stop/down. Compile with the KeeLoq Option and provide the extracted master keys to communicate. Please see KeeLog description how to do that. After this create a rule to allow the shutter to control the Jarolift devices. Shutter must be in ShutterMode 0.</p> <p><code>Rule1 On Power1#state=0 DO KeeloqSendButton 4 endon On Power2#state=0 DO KeeloqSendButton 4 endon on Power1#state=1 DO KeeloqSendButton 8 endon on Power2#State=1 DO KeeloqSendButton 2 endon</code></p> <h3 id=home-assistant-support>Home Assistant Support<a class=headerlink href=#home-assistant-support title="Permanent link">~</a></h3> <p>For shutter position to persist in Home Assistant through device reboots, execute <code>PowerRetain 1</code>.</p> <p>These sample configurations should allow the shutter work in Home Assistant. Change the device MQTT topic and templates to match your settings. This is only an example and may need further modification to work in your environment.</p> <p>The configuration requirements changed starting with Home Assistant version 0.82.0. This example uses a new configuration for roller shutters with options for positioning. It assumes that <code>%prefix%/%topic%/</code> is configured in the Tasmota Full Topic MQTT parameter. </p> <div class=codehilite><pre><span></span><code><span class=nt>cover</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>platform</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt</span>
    <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Balcony</span><span class=nv> </span><span class=s>Blinds&quot;</span>
    <span class=nt>availability_topic</span><span class=p>:</span> <span class=s>&quot;tele/%topic%/LWT&quot;</span>
    <span class=nt>payload_available</span><span class=p>:</span> <span class=s>&quot;Online&quot;</span>
    <span class=nt>payload_not_available</span><span class=p>:</span> <span class=s>&quot;Offline&quot;</span>
    <span class=nt>position_topic</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">stat/%topic%/Shutter1</span>
    <span class=nt>position_open</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
    <span class=nt>position_closed</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
    <span class=nt>set_position_topic</span><span class=p>:</span> <span class=s>&quot;cmnd/%topic%/ShutterPosition1&quot;</span>
    <span class=nt>command_topic</span><span class=p>:</span> <span class=s>&quot;cmnd/%topic%/Backlog&quot;</span>
    <span class=nt>payload_open</span><span class=p>:</span> <span class=s>&quot;ShutterOpen1&quot;</span>
    <span class=nt>payload_close</span><span class=p>:</span> <span class=s>&quot;ShutterClose1&quot;</span>
    <span class=nt>payload_stop</span><span class=p>:</span> <span class=s>&quot;ShutterStop1&quot;</span>
    <span class=nt>retain</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class=nt>optimistic</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class=nt>qos</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</code></pre></div> <p>Check <a href=https://github.com/stefanbode/Sonoff-Tasmota/issues/130>Issue 130</a> for more information about this configuration.</p> <p>Another Home Assistant integration example: </p> <div class=codehilite><pre><span></span><code><span class=nt>cover</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>platform</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt</span>
    <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Test&quot;</span>
    <span class=nt>availability_topic</span><span class=p>:</span> <span class=s>&quot;tele/%topic%/LWT&quot;</span>
    <span class=nt>state_topic</span><span class=p>:</span> <span class=s>&quot;stat/%topic%/RESULT&quot;</span>
    <span class=nt>command_topic</span><span class=p>:</span> <span class=s>&quot;cmnd/%topic%/Backlog&quot;</span>
    <span class=nt>value_template</span><span class=p>:</span> <span class=s>&#39;{{</span><span class=nv> </span><span class=s>value</span><span class=nv> </span><span class=s>|</span><span class=nv> </span><span class=s>int</span><span class=nv> </span><span class=s>}}&#39;</span>
    <span class=nt>qos</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class=nt>retain</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class=nt>payload_open</span><span class=p>:</span> <span class=s>&quot;ShutterOpen1&quot;</span>
    <span class=nt>payload_close</span><span class=p>:</span> <span class=s>&quot;ShutterClose1&quot;</span>
    <span class=nt>payload_stop</span><span class=p>:</span> <span class=s>&quot;ShutterStop1&quot;</span>
    <span class=nt>state_open</span><span class=p>:</span> <span class=s>&quot;ON&quot;</span>
    <span class=nt>state_closed</span><span class=p>:</span> <span class=s>&quot;OFF&quot;</span>
    <span class=nt>payload_available</span><span class=p>:</span> <span class=s>&quot;Online&quot;</span>
    <span class=nt>payload_not_available</span><span class=p>:</span> <span class=s>&quot;Offline&quot;</span>
    <span class=nt>optimistic</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class=nt>tilt_command_topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/ShutterPosition1&#39;</span>
    <span class=nt>tilt_status_topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/ShutterPosition1&#39;</span>
    <span class=nt>set_position_topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/ShutterPosition1&#39;</span>
    <span class=nt>position_topic</span><span class=p>:</span> <span class=s>&quot;stat/%topic%/SHUTTER1&quot;</span>
    <span class=nt>tilt_min</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
    <span class=nt>tilt_max</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
    <span class=nt>tilt_closed_value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
    <span class=nt>tilt_opened_value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
</code></pre></div> <p>Another Home Assistant integration example with position update while movement (Tasmota versions &gt;= v8.1.0.5): </p> <div class=codehilite><pre><span></span><code><span class=nt>cover</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>platform</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt</span>
    <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Balcony</span><span class=nv> </span><span class=s>Blinds&quot;</span>
    <span class=nt>availability_topic</span><span class=p>:</span> <span class=s>&quot;tele/%topic%/LWT&quot;</span>
    <span class=nt>payload_available</span><span class=p>:</span> <span class=s>&quot;Online&quot;</span>
    <span class=nt>payload_not_available</span><span class=p>:</span> <span class=s>&quot;Offline&quot;</span>
    <span class=nt>position_topic</span><span class=p>:</span> <span class=s>&quot;stat/%topic%/RESULT&quot;</span>
    <span class=nt>value_template</span><span class=p>:</span> <span class="p p-Indicator">&gt;</span>
      <span class=no>{% if (&#39;Shutter1&#39; in value_json) and (&#39;Position&#39; in value_json.Shutter1) %}</span>
        <span class=no>{{ value_json.Shutter1.Position }}</span>
      <span class=no>{% else %}</span>
        <span class=no>{% if is_state(&#39;cover.balcony_blinds&#39;, &#39;unknown&#39;) %}</span>
          <span class=no>50</span>
        <span class=no>{% else %}</span>
          <span class=no>{{ state_attr(&#39;cover.balcony_blinds&#39;,&#39;current_position&#39;) }}</span>
        <span class=no>{% endif %}</span>
      <span class=no>{% endif %}    </span>
    <span class=nt>position_open</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
    <span class=nt>position_closed</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
    <span class=nt>set_position_topic</span><span class=p>:</span> <span class=s>&quot;cmnd/%topic%/ShutterPosition1&quot;</span>
    <span class=nt>command_topic</span><span class=p>:</span> <span class=s>&quot;cmnd/%topic%/Backlog&quot;</span>
    <span class=nt>payload_open</span><span class=p>:</span> <span class=s>&quot;ShutterOpen1&quot;</span>
    <span class=nt>payload_close</span><span class=p>:</span> <span class=s>&quot;ShutterClose1&quot;</span>
    <span class=nt>payload_stop</span><span class=p>:</span> <span class=s>&quot;ShutterStop1&quot;</span>
    <span class=nt>retain</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class=nt>optimistic</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class=nt>qos</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</code></pre></div> <p>In addition, add to your home assistant start up automation a query for the current shutter position:</p> <div class=codehilite><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alias</span><span class=p>:</span> <span class=s>&quot;Power</span><span class=nv> </span><span class=s>state</span><span class=nv> </span><span class=s>on</span><span class=nv> </span><span class=s>HA</span><span class=nv> </span><span class=s>start-up&quot;</span>
  <span class=nt>trigger</span><span class=p>:</span>
    <span class=nt>platform</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">homeassistant</span>
    <span class=nt>event</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">start</span>
  <span class=nt>action</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>service</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt.publish</span>
      <span class=nt>data</span><span class=p>:</span>
        <span class=nt>topic</span><span class=p>:</span> <span class=s>&quot;cmnd/%shutters</span><span class=nv> </span><span class=s>grouptopic%/shutterposition&quot;</span>
        <span class=nt>payload</span><span class=p>:</span> <span class=s>&quot;&quot;</span>       
</code></pre></div> <p>This example works with Home Assistant <strong>versions prior to 0.82</strong>: </p> <div class=codehilite><pre><span></span><code><span class=nt>cover</span><span class=p>:</span>
 <span class="p p-Indicator">-</span> <span class=nt>platform</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">template</span>
   <span class=nt>covers</span><span class=p>:</span>
     <span class=nt>studio_shutter</span><span class=p>:</span>
       <span class=nt>friendly_name</span><span class=p>:</span> <span class=s>&quot;Studio</span><span class=nv> </span><span class=s>Shutter&quot;</span>
       <span class=nt>position_template</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>states.sensor.studio_shutter_position.state</span><span class=nv> </span><span class=s>|</span><span class=nv> </span><span class=s>int</span><span class=nv> </span><span class=s>}}&quot;</span>
       <span class=nt>open_cover</span><span class=p>:</span>
         <span class=nt>service</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt.publish</span>
         <span class=nt>data</span><span class=p>:</span>
           <span class=nt>topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/ShutterOpen1&#39;</span>
       <span class=nt>close_cover</span><span class=p>:</span>
         <span class=nt>service</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt.publish</span>
         <span class=nt>data</span><span class=p>:</span>
           <span class=nt>topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/ShutterClose1&#39;</span>
       <span class=nt>stop_cover</span><span class=p>:</span>
         <span class=nt>service</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt.publish</span>
         <span class=nt>data</span><span class=p>:</span>
           <span class=nt>topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/shutterstop1&#39;</span>
       <span class=nt>set_cover_position</span><span class=p>:</span>
         <span class=nt>service</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mqtt.publish</span>
         <span class=nt>data_template</span><span class=p>:</span>
           <span class=nt>topic</span><span class=p>:</span> <span class=s>&#39;cmnd/%topic%/ShutterPosition1&#39;</span>
           <span class=nt>payload</span><span class=p>:</span> <span class=s>&#39;{{position}}&#39;</span>
</code></pre></div> <h2 id=wiring-diagrams>Wiring Diagrams<a class=headerlink href=#wiring-diagrams title="Permanent link">~</a></h2> <h3 id=normal-wire-configuration-with-a-pcf-as-digital-io>Normal wire configuration with a PCF as digital I/O<a class=headerlink href=#normal-wire-configuration-with-a-pcf-as-digital-io title="Permanent link">~</a></h3> <p><img alt="Normal wire" src=https://user-images.githubusercontent.com/34340210/65997880-35b07800-e468-11e9-82d3-8dcaab14b3bf.png title=":size=200px"></p> <h3 id=short-circuit-safe-wire-configuration-with-a-pcf-as-digital-io>Short Circuit safe wire configuration with a PCF as digital I/O<a class=headerlink href=#short-circuit-safe-wire-configuration-with-a-pcf-as-digital-io title="Permanent link">~</a></h3> <p><img alt=ShortCicuitSafe src=https://user-images.githubusercontent.com/34340210/65997877-3517e180-e468-11e9-9b8c-2f0787f977f6.png title=":size=200px"></p> <h2 id=sample-log-output>Sample Log Output<a class=headerlink href=#sample-log-output title="Permanent link">~</a></h2> <p>Typical log output (log level <code>3</code>) when starting from <code>ShutterOpen1</code>. The first command is <code>ShutterClose1</code>. After closing, open it to 50% with <code>ShutterPosition1 50</code> </p> <div class=codehilite><pre><span></span><code><span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Accuracy</span><span class=w> </span><span class=nl>digits</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>(</span><span class=nl>Relay</span><span class=p>:</span><span class=mi>1</span><span class=p>)</span><span class=err>:</span><span class=w> </span><span class=n>Init</span><span class=p>.</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>20000</span><span class=w> </span><span class=o>[</span><span class=n>100 %</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=k>Open</span><span class=w> </span><span class=n>Vel</span><span class=p>.</span><span class=err>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=k>Close</span><span class=w> </span><span class=n>Vel</span><span class=p>.</span><span class=err>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=nf>Max</span><span class=w> </span><span class=nl>Way</span><span class=p>:</span><span class=w> </span><span class=mi>20000</span><span class=p>,</span><span class=w> </span><span class=n>Opentime</span><span class=w> </span><span class=mf>10.0</span><span class=w> </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>Closetime</span><span class=w> </span><span class=mf>10.0</span><span class=w> </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=nl>CoedffCalc</span><span class=p>:</span><span class=w> </span><span class=nl>c0</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>c1</span><span class=w> </span><span class=mi>200</span><span class=p>,</span><span class=w> </span><span class=nl>c2</span><span class=p>:</span><span class=w> </span><span class=mi>200</span><span class=p>,</span><span class=w> </span><span class=nl>c3</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>c4</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>binmask</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>inverted</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>ShutterMode</span><span class=w> </span><span class=mi>0</span><span class=w></span>
<span class=p>....</span><span class=w></span>
<span class=nl>CMD</span><span class=p>:</span><span class=w> </span><span class=n>ShutterClose</span><span class=w></span>
<span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Serial</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=k>Position</span><span class=w> </span><span class=ow>in</span><span class=err>:</span><span class=w> </span><span class=n>payload</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>source</span><span class=w> </span><span class=mi>7</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>lastsource</span><span class=w> </span><span class=mi>7</span><span class=err>:</span><span class=p>,</span><span class=w> </span><span class=n>realpos</span><span class=w> </span><span class=mi>20000</span><span class=p>,</span><span class=w> </span><span class=n>target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>payload</span><span class=w> </span><span class=mi>0</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=k>Start</span><span class=w> </span><span class=n>shutter</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>direction</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=w></span>
<span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;POWER2&quot;</span><span class=err>:</span><span class=ss>&quot;ON&quot;</span><span class=err>}</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=n>POWER2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>ON</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;ShutterClose1&quot;</span><span class=err>:</span><span class=mi>0</span><span class=err>}</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>19000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>CFG</span><span class=p>:</span><span class=w> </span><span class=n>Saved</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>flash</span><span class=w> </span><span class=k>at</span><span class=w> </span><span class=n>F5</span><span class=p>,</span><span class=w> </span><span class=nf>Count</span><span class=w> </span><span class=mi>725</span><span class=p>,</span><span class=w> </span><span class=n>Bytes</span><span class=w> </span><span class=mi>4096</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>17000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>1.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>15000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>2.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>13000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>3.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>11000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>4.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>9000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>5.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>7000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>6.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>5000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>7.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>3000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>8.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>9.5</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=n>Pos</span><span class=p>.</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>Stoppos</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>relay</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>direction</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>pulsetimer</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>10.1</span><span class=w> </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>operationtime</span><span class=w> </span><span class=mi>0</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=n>SHUTTER1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w></span>
<span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;POWER2&quot;</span><span class=err>:</span><span class=ss>&quot;OFF&quot;</span><span class=err>}</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=n>POWER2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>OFF</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>tele</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;Shutter1&quot;</span><span class=err>:{</span><span class=ss>&quot;Position&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;direction&quot;</span><span class=err>:</span><span class=mi>0</span><span class=err>}}</span><span class=w></span>
<span class=nl>CFG</span><span class=p>:</span><span class=w> </span><span class=n>Saved</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>flash</span><span class=w> </span><span class=k>at</span><span class=w> </span><span class=n>F4</span><span class=p>,</span><span class=w> </span><span class=nf>Count</span><span class=w> </span><span class=mi>726</span><span class=p>,</span><span class=w> </span><span class=n>Bytes</span><span class=w> </span><span class=mi>4096</span><span class=w></span>
<span class=p>....</span><span class=w></span>
<span class=nl>CMD</span><span class=p>:</span><span class=w> </span><span class=n>ShutterPosition</span><span class=w> </span><span class=mi>50</span><span class=w></span>
<span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Serial</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=k>Position</span><span class=w> </span><span class=ow>in</span><span class=err>:</span><span class=w> </span><span class=n>payload</span><span class=w> </span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>source</span><span class=w> </span><span class=mi>23</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>lastsource</span><span class=w> </span><span class=mi>23</span><span class=err>:</span><span class=p>,</span><span class=w> </span><span class=n>realpos</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>target</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=n>payload</span><span class=w> </span><span class=mi>50</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=k>Start</span><span class=w> </span><span class=n>shutter</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>direction</span><span class=w> </span><span class=mi>1</span><span class=w></span>
<span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;POWER1&quot;</span><span class=err>:</span><span class=ss>&quot;ON&quot;</span><span class=err>}</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=n>POWER1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>ON</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;ShutterPosition1&quot;</span><span class=err>:</span><span class=mi>50</span><span class=err>}</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>1500</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>0.8</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>CFG</span><span class=p>:</span><span class=w> </span><span class=n>Saved</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>flash</span><span class=w> </span><span class=k>at</span><span class=w> </span><span class=n>FB</span><span class=p>,</span><span class=w> </span><span class=nf>Count</span><span class=w> </span><span class=mi>727</span><span class=p>,</span><span class=w> </span><span class=n>Bytes</span><span class=w> </span><span class=mi>4096</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>3500</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>1.8</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>5500</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>2.7</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>7500</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>3.7</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=nl>Pos</span><span class=p>:</span><span class=w> </span><span class=mi>9500</span><span class=p>,</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=nl>source</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=p>,</span><span class=w> </span><span class=k>start</span><span class=o>-</span><span class=nl>pos</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>%</span><span class=p>,</span><span class=w> </span><span class=nl>direction</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>4.7</span><span class=w>  </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=w></span>
<span class=nl>SHT</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w> </span><span class=mi>0</span><span class=err>:</span><span class=w> </span><span class=nc>Real</span><span class=w> </span><span class=n>Pos</span><span class=p>.</span><span class=w> </span><span class=mi>10000</span><span class=p>,</span><span class=w> </span><span class=nl>Stoppos</span><span class=p>:</span><span class=w> </span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=nl>relay</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>direction</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nl>pulsetimer</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nl>rtcshutter</span><span class=p>:</span><span class=w> </span><span class=mf>5.0</span><span class=w> </span><span class=o>[</span><span class=n>s</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>operationtime</span><span class=w> </span><span class=mi>2</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=n>SHUTTER1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>50</span><span class=w></span>
<span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Shutter</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;POWER1&quot;</span><span class=err>:</span><span class=ss>&quot;OFF&quot;</span><span class=err>}</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=n>POWER1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>OFF</span><span class=w></span>
<span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>tele</span><span class=o>/%</span><span class=n>topic</span><span class=o>%/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;Shutter1&quot;</span><span class=err>:{</span><span class=ss>&quot;Position&quot;</span><span class=err>:</span><span class=mi>50</span><span class=p>,</span><span class=ss>&quot;direction&quot;</span><span class=err>:</span><span class=mi>0</span><span class=err>}}</span><span class=w></span>
<span class=nl>CFG</span><span class=p>:</span><span class=w> </span><span class=n>Saved</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>flash</span><span class=w> </span><span class=k>at</span><span class=w> </span><span class=n>FA</span><span class=p>,</span><span class=w> </span><span class=nf>Count</span><span class=w> </span><span class=mi>728</span><span class=p>,</span><span class=w> </span><span class=n>Bytes</span><span class=w> </span><span class=mi>4096</span><span class=w></span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../Device-Groups/ title="Device Groups" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Device Groups </div> </div> </a> <a href=../Shutter-and-Steppers/ title="Shutter and Steppers" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Shutter and Steppers </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z /></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://discord.gg/Ks2Kzd4 target=_blank rel=noopener title=discord.gg class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg> </a> <a href=https://t.me/tasmota target=_blank rel=noopener title=t.me class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg> </a> <a href=https://github.com/tasmota target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.23350dc5.min.js></script> <script src=../assets/javascripts/bundle.36a8f969.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.3bc815f0.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>